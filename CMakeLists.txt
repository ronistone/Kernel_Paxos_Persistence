cmake_minimum_required(VERSION 2.8.8)
project(kernel)

include_directories(kpaxos/include)
include_directories(paxos/include)
include_directories(/home/roni/Workspace/ufu/TCC/linux/include)

add_library(kernel OBJECT
        kpaxos/kernel_device.c
        kpaxos/read_persistence_device_operations.c
        kpaxos/write_test_device_operations.c
        kpaxos/lmdb_operations.c
        kpaxos/workers_pool.c
        kpaxos/user_chardev.c
        persistence_main.c
        build/persistence.mod.c
        kpaxos/write_persistence_device_operations.c
        kpaxos/user_storage.c
        kpaxos/read_test_device_operations.c
        testekerneldevice.c
        )


set_source_files_properties(../../../kpaxos/kernel_device.c PROPERTIES COMPILE_FLAGS "-c -Wp,-MD,..//vagrant/build/kpaxos/.kernel_device.o.d -nostdinc -isystem /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I.././arch/x86/include -I../arch/x86/include/generated -I../include -I.././arch/x86/include/uapi -I../arch/x86/include/generated/uapi -I.././include/uapi -I../include/generated/uapi -include .././include/linux/kconfig.h -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -std=gnu89 -O2 -m64 -mno-mmx -mno-sse -mpreferred-stack-boundary=3 -mtune=generic -mno-red-zone -mcmodel=kernel -funit-at-a-time -maccumulate-outgoing-args -Wframe-larger-than=2048 -DCONFIG_AS_CFI=1 -DCONFIG_AS_CFI_SIGNAL_FRAME=1 -DCONFIG_AS_CFI_SECTIONS=1 -DCONFIG_AS_FXSAVEQ=1 -DCONFIG_AS_AVX=1 -DCONFIG_AS_AVX2=1 -DCONFIG_AS_AVX512=1 -DCONFIG_AS_SHA1_NI=1 -DCONFIG_AS_SHA256_NI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mindirect-branch=thunk-extern -mindirect-branch-register -DRETPOLINE -Wframe-larger-than=2048 -fstack-protector-strong -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -pg -mfentry -DCC_USING_FENTRY -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO -std=gnu99 -Wall -Wno-declaration-after-statement -Wframe-larger-than=3100 -O3 -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include -DMODULE -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(kernel_device) -DKBUILD_MODNAME=KBUILD_STR(persistence)")
set_source_files_properties(../../../kpaxos/read_persistence_device_operations.c PROPERTIES COMPILE_FLAGS "-c -Wp,-MD,..//vagrant/build/kpaxos/.read_persistence_device_operations.o.d -nostdinc -isystem /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I.././arch/x86/include -I../arch/x86/include/generated -I../include -I.././arch/x86/include/uapi -I../arch/x86/include/generated/uapi -I.././include/uapi -I../include/generated/uapi -include .././include/linux/kconfig.h -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -std=gnu89 -O2 -m64 -mno-mmx -mno-sse -mpreferred-stack-boundary=3 -mtune=generic -mno-red-zone -mcmodel=kernel -funit-at-a-time -maccumulate-outgoing-args -Wframe-larger-than=2048 -DCONFIG_AS_CFI=1 -DCONFIG_AS_CFI_SIGNAL_FRAME=1 -DCONFIG_AS_CFI_SECTIONS=1 -DCONFIG_AS_FXSAVEQ=1 -DCONFIG_AS_AVX=1 -DCONFIG_AS_AVX2=1 -DCONFIG_AS_AVX512=1 -DCONFIG_AS_SHA1_NI=1 -DCONFIG_AS_SHA256_NI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mindirect-branch=thunk-extern -mindirect-branch-register -DRETPOLINE -Wframe-larger-than=2048 -fstack-protector-strong -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -pg -mfentry -DCC_USING_FENTRY -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO -std=gnu99 -Wall -Wno-declaration-after-statement -Wframe-larger-than=3100 -O3 -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include -DMODULE -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(read_persistence_device_operations) -DKBUILD_MODNAME=KBUILD_STR(persistence)")
set_source_files_properties(../../../kpaxos/write_test_device_operations.c PROPERTIES COMPILE_FLAGS "-c -Wp,-MD,..//vagrant/build/kpaxos/.write_test_device_operations.o.d -nostdinc -isystem /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I.././arch/x86/include -I../arch/x86/include/generated -I../include -I.././arch/x86/include/uapi -I../arch/x86/include/generated/uapi -I.././include/uapi -I../include/generated/uapi -include .././include/linux/kconfig.h -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -std=gnu89 -O2 -m64 -mno-mmx -mno-sse -mpreferred-stack-boundary=3 -mtune=generic -mno-red-zone -mcmodel=kernel -funit-at-a-time -maccumulate-outgoing-args -Wframe-larger-than=2048 -DCONFIG_AS_CFI=1 -DCONFIG_AS_CFI_SIGNAL_FRAME=1 -DCONFIG_AS_CFI_SECTIONS=1 -DCONFIG_AS_FXSAVEQ=1 -DCONFIG_AS_AVX=1 -DCONFIG_AS_AVX2=1 -DCONFIG_AS_AVX512=1 -DCONFIG_AS_SHA1_NI=1 -DCONFIG_AS_SHA256_NI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mindirect-branch=thunk-extern -mindirect-branch-register -DRETPOLINE -Wframe-larger-than=2048 -fstack-protector-strong -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -pg -mfentry -DCC_USING_FENTRY -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO -std=gnu99 -Wall -Wno-declaration-after-statement -Wframe-larger-than=3100 -O3 -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include -DMODULE -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(write_test_device_operations) -DKBUILD_MODNAME=KBUILD_STR(persistence)")
set_source_files_properties(kpaxos/lmdb_operations.c PROPERTIES COMPILE_FLAGS "-c -std=gnu99 -Wall -D user_space -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include")
set_source_files_properties(../../../kpaxos/workers_pool.c PROPERTIES COMPILE_FLAGS "-c -Wp,-MD,..//vagrant/build/kpaxos/.workers_pool.o.d -nostdinc -isystem /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I.././arch/x86/include -I../arch/x86/include/generated -I../include -I.././arch/x86/include/uapi -I../arch/x86/include/generated/uapi -I.././include/uapi -I../include/generated/uapi -include .././include/linux/kconfig.h -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -std=gnu89 -O2 -m64 -mno-mmx -mno-sse -mpreferred-stack-boundary=3 -mtune=generic -mno-red-zone -mcmodel=kernel -funit-at-a-time -maccumulate-outgoing-args -Wframe-larger-than=2048 -DCONFIG_AS_CFI=1 -DCONFIG_AS_CFI_SIGNAL_FRAME=1 -DCONFIG_AS_CFI_SECTIONS=1 -DCONFIG_AS_FXSAVEQ=1 -DCONFIG_AS_AVX=1 -DCONFIG_AS_AVX2=1 -DCONFIG_AS_AVX512=1 -DCONFIG_AS_SHA1_NI=1 -DCONFIG_AS_SHA256_NI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mindirect-branch=thunk-extern -mindirect-branch-register -DRETPOLINE -Wframe-larger-than=2048 -fstack-protector-strong -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -pg -mfentry -DCC_USING_FENTRY -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO -std=gnu99 -Wall -Wno-declaration-after-statement -Wframe-larger-than=3100 -O3 -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include -DMODULE -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(workers_pool) -DKBUILD_MODNAME=KBUILD_STR(persistence)")
set_source_files_properties(kpaxos/user_chardev.c PROPERTIES COMPILE_FLAGS "-c -std=gnu99 -Wall -D user_space -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include")
set_source_files_properties(../../../persistence_main.c PROPERTIES COMPILE_FLAGS "-c -Wp,-MD,..//vagrant/build/.persistence_main.o.d -nostdinc -isystem /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I.././arch/x86/include -I../arch/x86/include/generated -I../include -I.././arch/x86/include/uapi -I../arch/x86/include/generated/uapi -I.././include/uapi -I../include/generated/uapi -include .././include/linux/kconfig.h -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -std=gnu89 -O2 -m64 -mno-mmx -mno-sse -mpreferred-stack-boundary=3 -mtune=generic -mno-red-zone -mcmodel=kernel -funit-at-a-time -maccumulate-outgoing-args -Wframe-larger-than=2048 -DCONFIG_AS_CFI=1 -DCONFIG_AS_CFI_SIGNAL_FRAME=1 -DCONFIG_AS_CFI_SECTIONS=1 -DCONFIG_AS_FXSAVEQ=1 -DCONFIG_AS_AVX=1 -DCONFIG_AS_AVX2=1 -DCONFIG_AS_AVX512=1 -DCONFIG_AS_SHA1_NI=1 -DCONFIG_AS_SHA256_NI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mindirect-branch=thunk-extern -mindirect-branch-register -DRETPOLINE -Wframe-larger-than=2048 -fstack-protector-strong -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -pg -mfentry -DCC_USING_FENTRY -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO -std=gnu99 -Wall -Wno-declaration-after-statement -Wframe-larger-than=3100 -O3 -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include -DMODULE -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(persistence_main) -DKBUILD_MODNAME=KBUILD_STR(persistence)")
set_source_files_properties(../../../build/persistence.mod.c PROPERTIES COMPILE_FLAGS "-c -Wp,-MD,..//vagrant/build/.persistence.mod.o.d -nostdinc -isystem /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I.././arch/x86/include -I../arch/x86/include/generated -I../include -I.././arch/x86/include/uapi -I../arch/x86/include/generated/uapi -I.././include/uapi -I../include/generated/uapi -include .././include/linux/kconfig.h -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -std=gnu89 -O2 -m64 -mno-mmx -mno-sse -mpreferred-stack-boundary=3 -mtune=generic -mno-red-zone -mcmodel=kernel -funit-at-a-time -maccumulate-outgoing-args -Wframe-larger-than=2048 -DCONFIG_AS_CFI=1 -DCONFIG_AS_CFI_SIGNAL_FRAME=1 -DCONFIG_AS_CFI_SECTIONS=1 -DCONFIG_AS_FXSAVEQ=1 -DCONFIG_AS_AVX=1 -DCONFIG_AS_AVX2=1 -DCONFIG_AS_AVX512=1 -DCONFIG_AS_SHA1_NI=1 -DCONFIG_AS_SHA256_NI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mindirect-branch=thunk-extern -mindirect-branch-register -DRETPOLINE -Wframe-larger-than=2048 -fstack-protector-strong -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -pg -mfentry -DCC_USING_FENTRY -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(persistence.mod) -DKBUILD_MODNAME=KBUILD_STR(persistence) -DMODULE")
set_source_files_properties(../../../kpaxos/write_persistence_device_operations.c PROPERTIES COMPILE_FLAGS "-c -Wp,-MD,..//vagrant/build/kpaxos/.write_persistence_device_operations.o.d -nostdinc -isystem /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I.././arch/x86/include -I../arch/x86/include/generated -I../include -I.././arch/x86/include/uapi -I../arch/x86/include/generated/uapi -I.././include/uapi -I../include/generated/uapi -include .././include/linux/kconfig.h -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -std=gnu89 -O2 -m64 -mno-mmx -mno-sse -mpreferred-stack-boundary=3 -mtune=generic -mno-red-zone -mcmodel=kernel -funit-at-a-time -maccumulate-outgoing-args -Wframe-larger-than=2048 -DCONFIG_AS_CFI=1 -DCONFIG_AS_CFI_SIGNAL_FRAME=1 -DCONFIG_AS_CFI_SECTIONS=1 -DCONFIG_AS_FXSAVEQ=1 -DCONFIG_AS_AVX=1 -DCONFIG_AS_AVX2=1 -DCONFIG_AS_AVX512=1 -DCONFIG_AS_SHA1_NI=1 -DCONFIG_AS_SHA256_NI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mindirect-branch=thunk-extern -mindirect-branch-register -DRETPOLINE -Wframe-larger-than=2048 -fstack-protector-strong -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -pg -mfentry -DCC_USING_FENTRY -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO -std=gnu99 -Wall -Wno-declaration-after-statement -Wframe-larger-than=3100 -O3 -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include -DMODULE -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(write_persistence_device_operations) -DKBUILD_MODNAME=KBUILD_STR(persistence)")
set_source_files_properties(kpaxos/user_storage.c PROPERTIES COMPILE_FLAGS "-c -std=gnu99 -Wall -D user_space -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include")
set_source_files_properties(../../../kpaxos/read_test_device_operations.c PROPERTIES COMPILE_FLAGS "-c -Wp,-MD,..//vagrant/build/kpaxos/.read_test_device_operations.o.d -nostdinc -isystem /usr/lib/gcc/x86_64-redhat-linux/4.8.5/include -I.././arch/x86/include -I../arch/x86/include/generated -I../include -I.././arch/x86/include/uapi -I../arch/x86/include/generated/uapi -I.././include/uapi -I../include/generated/uapi -include .././include/linux/kconfig.h -D__KERNEL__ -Wall -Wundef -Wstrict-prototypes -Wno-trigraphs -fno-strict-aliasing -fno-common -Werror-implicit-function-declaration -Wno-format-security -fno-delete-null-pointer-checks -std=gnu89 -O2 -m64 -mno-mmx -mno-sse -mpreferred-stack-boundary=3 -mtune=generic -mno-red-zone -mcmodel=kernel -funit-at-a-time -maccumulate-outgoing-args -Wframe-larger-than=2048 -DCONFIG_AS_CFI=1 -DCONFIG_AS_CFI_SIGNAL_FRAME=1 -DCONFIG_AS_CFI_SECTIONS=1 -DCONFIG_AS_FXSAVEQ=1 -DCONFIG_AS_AVX=1 -DCONFIG_AS_AVX2=1 -DCONFIG_AS_AVX512=1 -DCONFIG_AS_SHA1_NI=1 -DCONFIG_AS_SHA256_NI=1 -pipe -Wno-sign-compare -fno-asynchronous-unwind-tables -mno-sse -mno-mmx -mno-sse2 -mno-3dnow -mno-avx -mindirect-branch=thunk-extern -mindirect-branch-register -DRETPOLINE -Wframe-larger-than=2048 -fstack-protector-strong -Wno-unused-but-set-variable -fno-omit-frame-pointer -fno-optimize-sibling-calls -g -pg -mfentry -DCC_USING_FENTRY -fno-inline-functions-called-once -Wdeclaration-after-statement -Wno-pointer-sign -fno-strict-overflow -fconserve-stack -DCC_HAVE_ASM_GOTO -std=gnu99 -Wall -Wno-declaration-after-statement -Wframe-larger-than=3100 -O3 -I..//vagrant/kpaxos/include -I..//vagrant/paxos/include -I..//home/vagrant/local/include -DMODULE -DKBUILD_STR(s)=#s -DKBUILD_BASENAME=KBUILD_STR(read_test_device_operations) -DKBUILD_MODNAME=KBUILD_STR(persistence)")
set_source_files_properties(testekerneldevice.c PROPERTIES COMPILE_FLAGS "-c -I../paxos/include -I../kpaxos/include")
